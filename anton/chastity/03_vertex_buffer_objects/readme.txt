I made my own modified version of anton's example #3. Mine compiles with c99 instead of C++.
It also is all in one main.c file instead of split into multiple files.
